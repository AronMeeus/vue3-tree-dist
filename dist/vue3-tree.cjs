var Z=Object.defineProperty,$=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var E=(a,e,u)=>e in a?Z(a,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[e]=u,f=(a,e)=>{for(var u in e||(e={}))ee.call(e,u)&&E(a,u,e[u]);if(V)for(var u of V(e))oe.call(e,u)&&E(a,u,e[u]);return a},y=(a,e)=>$(a,v(e));(function(a,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(a=typeof globalThis!="undefined"?globalThis:a||self,e(a.Tree={},a.Vue))})(this,function(a,e){"use strict";const u={},z={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-right"},M=e.createVNode("polyline",{points:"9 18 15 12 9 6"},null,-1);function q(n,t){return e.openBlock(),e.createBlock("svg",z,[M])}u.render=q;const I={},j={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},F=e.createVNode("polyline",{points:"6 9 12 15 18 9"},null,-1);function H(n,t){return e.openBlock(),e.createBlock("svg",j,[F])}I.render=H;const S={},L={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x"},O=e.createVNode("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),U=e.createVNode("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1);function P(n,t){return e.openBlock(),e.createBlock("svg",L,[O,U])}S.render=P;var ne="";const R={components:{ArrowRight:u,ArrowDown:I,DeleteIcon:S},props:{node:{type:Object,required:!0},indentSize:{type:Number,required:!0},gap:{type:Number,required:!0},getNode:{type:Function,required:!0},setNode:{type:Function,required:!0},updateNode:{type:Function,required:!0},expandRowByDefault:{type:Boolean,default:!1},useCheckbox:{type:Boolean,default:!1},useIcon:{type:Boolean,default:!0},useRowDelete:{type:Boolean,default:!1},showChildCount:{type:Boolean,default:!1},rowHoverBackground:{type:String,default:"#e0e0e0"},expandable:{type:Boolean,default:!0}},emits:["nodeClick","toggleCheckbox","nodeExpanded","deleteRow"],setup(n,{emit:t}){const o=e.computed(()=>{var l;return(l=n.node.nodes)==null?void 0:l.length}),d=e.computed(()=>{var l;return(l=n.node.nodes)==null?void 0:l.filter(s=>s.checked).length}),c=l=>{n.node.expanded=n.node.nodes?!n.node.expanded:!1,e.nextTick(()=>{t("nodeExpanded",l,n.node.expanded)})};return{childCount:o,checkedChildCount:d,handleClick:(l,s)=>{!s&&n.expandable&&o.value&&c(l),t("nodeClick",f({},l))},onNodeExpanded:(l,s)=>{t("nodeExpanded",l,s)},onToggleCheckbox:l=>{t("toggleCheckbox",l)},removedRow:l=>{t("deleteRow",l)}}}},W={key:0,class:"tree-row-item-icon-wrapper"},G={class:"tree-row-txt"},J={class:"child-count"};function K(n,t,o,d,c,i){const h=e.resolveComponent("arrow-right"),g=e.resolveComponent("arrow-down"),w=e.resolveComponent("delete-icon"),l=e.resolveComponent("tree-row",!0);return e.openBlock(),e.createBlock("li",{class:"tree-row",style:{gap:`${o.gap}px`,paddingLeft:`${o.indentSize}px`,"--row-hover-background":o.rowHoverBackground}},[e.createVNode("div",{class:"tree-row-item",onClick:t[4]||(t[4]=e.withModifiers(s=>d.handleClick(o.node),["stop"]))},[o.useIcon?(e.openBlock(),e.createBlock("div",W,[d.childCount?(e.openBlock(),e.createBlock(e.Fragment,{key:0},[o.node.expanded?e.renderSlot(n.$slots,"iconInactive",{key:1},()=>[e.createVNode(g)]):e.renderSlot(n.$slots,"iconActive",{key:0},()=>[e.createVNode(h)])],64)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.renderSlot(n.$slots,"checkbox",{id:o.node.id,node:o.node,checked:o.node.checked,indeterminate:o.node.indeterminate},()=>[o.useCheckbox?e.withDirectives((e.openBlock(),e.createBlock("input",{key:0,"onUpdate:modelValue":t[1]||(t[1]=s=>o.node.checked=s),type:"checkbox",checked:o.node.checked,indeterminate:o.node.indeterminate,onClick:t[2]||(t[2]=e.withModifiers(s=>d.onToggleCheckbox(o.node),["stop"]))},null,8,["checked","indeterminate"])),[[e.vModelCheckbox,o.node.checked]]):e.createCommentVNode("",!0)]),e.createVNode("span",G,e.toDisplayString(o.node.label),1),d.childCount&&o.showChildCount?e.renderSlot(n.$slots,"childCount",{key:1,count:d.childCount,checkedCount:d.checkedChildCount,childs:o.node.nodes},()=>[e.createVNode("span",J,e.toDisplayString(d.childCount),1)]):e.createCommentVNode("",!0),o.node&&o.useRowDelete?(e.openBlock(),e.createBlock("div",{key:2,class:"delete-icon",onClick:t[3]||(t[3]=e.withModifiers(s=>d.removedRow(o.node),["stop"]))},[e.renderSlot(n.$slots,"deleteIcon",{},()=>[e.createVNode(w)])])):e.createCommentVNode("",!0)]),o.node.expanded?(e.openBlock(),e.createBlock("ul",{key:0,class:"tree-list",style:{gap:`${o.gap}px`}},[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(o.node.nodes,s=>(e.openBlock(),e.createBlock(l,{key:s.id,ref:`tree-row-${s.id}`,node:s,"use-checkbox":o.useCheckbox,"use-icon":o.useIcon,"use-row-delete":o.useRowDelete,"show-child-count":o.showChildCount,gap:o.gap,"expand-row-by-default":o.expandRowByDefault,"indent-size":o.indentSize,"row-hover-background":o.rowHoverBackground,"set-node":o.setNode,"get-node":o.getNode,"update-node":o.updateNode,expandable:o.expandable,onDeleteRow:d.removedRow,onNodeClick:t[5]||(t[5]=r=>d.handleClick(r,!0)),onToggleCheckbox:d.onToggleCheckbox,onNodeExpanded:d.onNodeExpanded},{childCount:e.withCtx(({count:r,checkedCount:k,childs:p})=>[e.renderSlot(n.$slots,"childCount",{count:r,checkedCount:k,childs:p})]),iconActive:e.withCtx(()=>[e.renderSlot(n.$slots,"iconActive",{},()=>[e.createVNode(h)])]),iconInactive:e.withCtx(()=>[e.renderSlot(n.$slots,"iconInactive",{},()=>[e.createVNode(g)])]),deleteIcon:e.withCtx(()=>[e.renderSlot(n.$slots,"deleteIcon",{},()=>[e.createVNode(w)])]),checkbox:e.withCtx(({node:r,checked:k,indeterminate:p})=>[e.renderSlot(n.$slots,"checkbox",{id:r.id,node:r,checked:k,indeterminate:p})]),_:2},1032,["node","use-checkbox","use-icon","use-row-delete","show-child-count","gap","expand-row-by-default","indent-size","row-hover-background","set-node","get-node","update-node","expandable","onDeleteRow","onToggleCheckbox","onNodeExpanded"]))),128))],4)):e.createCommentVNode("",!0)],4)}R.render=K;const x=n=>n.map(t=>{var i;if(!((i=t.nodes)==null?void 0:i.length))return y(f({},t),{expanded:!1});t.nodes=x(t.nodes);const o=t.nodes.every(h=>h.checked),d=t.nodes.some(h=>h.checked),c=t.nodes.some(h=>h.indeterminate);return t.checked=o,t.indeterminate=!o&&(d||c),t}),D=(n,t)=>{let o=[...n];return o=o.map(d=>{const c=t==null?void 0:t.checked;let i=f({checked:!!c,expanded:!1,indeterminate:!1},d);return Array.isArray(i.nodes)&&(i.nodes=D(i.nodes,i)),i}),x(o)},Q=(n,t)=>{const o=(d,c)=>{if(c.label.toLowerCase().includes(t.toLowerCase()))return d.push(c),d;if(Array.isArray(c.nodes)){const h=c.nodes.reduce(o,[]);h.length&&d.push(y(f({},c),{nodes:h}))}return d};return n.reduce(o,[])};function m(n,t){for(let o=0;o<n.length;o++){const d=n[o];if(d.id===t)return d;if(Array.isArray(d.nodes)){const c=m(d.nodes,t);if(c)return c}}}const _=(n,t,o)=>n.map(d=>(d.id===t?d=f({id:t},o):Array.isArray(d.nodes)&&(d.nodes=_(d.nodes,t,o)),d));function T(n,t){const o=t!=null?t:n.checked;return n.checked=o,n&&Array.isArray(n.nodes)&&(n.nodes=n.nodes.map(d=>{const c=y(f({},d),{checked:o});return d.nodes?c.nodes.forEach(i=>T(i,o)):delete c.nodes,c})),n}const N=(n,t,o)=>n.map(d=>{let c=d;return c.id===t?c=T(f(f({},d),o)):Array.isArray(c.nodes)&&(c.nodes=N(d.nodes,t,o)),c});function b(n,t){if(!Array.isArray(n))return;let o=[...n];for(let d=0;d<n.length;d++){const c=n[d];c.id===t?o=o.filter(i=>i.id!==t):c.nodes&&(c.nodes=b(c.nodes,t),c.nodes.length||delete c.nodes)}return o}function A(n){!n||(n.nodes&&n.nodes.forEach(A),n.expanded=!0)}var te="";const B={name:"Tree",components:{TreeRow:R},props:{nodes:{type:Array,required:!0},props:{type:Object,default(){return{nodes:"nodes",label:"label"}}},indentSize:{type:Number,default:24},gap:{type:Number,default:10},searchText:{type:String,default:""},expandRowByDefault:{type:Boolean,default:!1},expandAllRowsOnSearch:{type:Boolean,default:!0},useCheckbox:{type:Boolean,default:!1},useIcon:{type:Boolean,default:!0},useRowDelete:{type:Boolean,default:!1},showChildCount:{type:Boolean,default:!1},rowHoverBackground:{type:String,default:"#e0e0e0"},expandable:{type:Boolean,default:!0}},emits:["nodeClick","nodeExpanded","checkboxToggle","update:nodes"],setup(n,{emit:t}){e.onMounted(()=>t("update:nodes",D(n.nodes)));const o=e.computed(()=>{let r=n.nodes;return n.searchText&&(r=Q(n.nodes,n.searchText),n.expandAllRowsOnSearch&&r.forEach(A)),x(r)}),d=r=>m(n.nodes,r),c=(r,k)=>{t("update:nodes",_(n.nodes,r,k))},i=(r,k)=>{t("update:nodes",x(N(n.nodes,r,k)))};return{setNode:c,getNode:d,updateNode:i,onNodeClick:r=>{t("nodeClick",r)},onNodeExpanded:(r,k)=>{t("nodeExpanded",r,k)},onUpdate:()=>{t("update:nodes",n.nodes)},onToggleCheckbox:r=>{const k=!r.checked;i(r.id,{checked:k}),t("nodeClick",y(f({},r),{checked:k}))},onDeleteRow:r=>{b(n.nodes,r.id),t("update:nodes",x(b(n.nodes,r.id)))},filteredData:o}}},C=e.withScopeId("data-v-4af757df");e.pushScopeId("data-v-4af757df");const X={class:"tree"};e.popScopeId();const Y=C((n,t,o,d,c,i)=>{const h=e.resolveComponent("tree-row");return e.openBlock(),e.createBlock("div",X,[e.createVNode("ul",{class:"tree-list",style:{gap:`${o.gap}px`}},[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(d.filteredData,g=>(e.openBlock(),e.createBlock(h,{key:g.id,ref:`tree-row-${g.id}`,node:g,"use-checkbox":o.useCheckbox,"use-icon":o.useIcon,"use-row-delete":o.useRowDelete,"show-child-count":o.showChildCount,"indent-size":o.indentSize,gap:o.gap,"row-hover-background":o.rowHoverBackground,"set-node":d.setNode,"get-node":d.getNode,"update-node":d.updateNode,expandable:o.expandable,onDeleteRow:d.onDeleteRow,onNodeClick:d.onNodeClick,onNodeExpanded:d.onNodeExpanded,onToggleCheckbox:d.onToggleCheckbox},e.createSlots({checkbox:C(({node:w,checked:l,indeterminate:s})=>[e.renderSlot(n.$slots,"checkbox",{node:w,checked:l,indeterminate:s,toggleCheckbox:()=>d.onToggleCheckbox(w)},void 0,!0)]),_:2},[o.useIcon?{name:"iconActive",fn:C(()=>[e.renderSlot(n.$slots,"iconActive",{},void 0,!0)])}:void 0,o.useIcon?{name:"iconInactive",fn:C(()=>[e.renderSlot(n.$slots,"iconInactive",{},void 0,!0)])}:void 0,o.useRowDelete?{name:"deleteIcon",fn:C(()=>[e.renderSlot(n.$slots,"deleteIcon",{},void 0,!0)])}:void 0,o.showChildCount?{name:"childCount",fn:C(({count:w,checkedCount:l,childs:s})=>[e.renderSlot(n.$slots,"childCount",{count:w,checkedCount:l,childs:s},void 0,!0)])}:void 0]),1032,["node","use-checkbox","use-icon","use-row-delete","show-child-count","indent-size","gap","row-hover-background","set-node","get-node","update-node","expandable","onDeleteRow","onNodeClick","onNodeExpanded","onToggleCheckbox"]))),128))],4)])});B.render=Y,B.__scopeId="data-v-4af757df",a.default=B,a.getNodeById=m,a.setNodeById=_,a.updateNodeById=N,Object.defineProperty(a,"__esModule",{value:!0}),a[Symbol.toStringTag]="Module"});
